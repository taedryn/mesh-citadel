system: &system
  name: "Mesh-Citadel"

bbs:
  <<: *system
  max_messages_per_room: 300        # (restart required)
  max_rooms: 50                     # (restart required)
  max_users: 300                    # (restart required)
  mail_message_limit: 50
  starting_room: "Lobby"
  system_events_room: "System"
  export_format: "json"             # "csv", "json", or "yaml"
  # System room names (changeable but rooms IDs 1-6 are reserved)
  room_names:
    lobby: "Lobby"                  # Room ID 1
    mail: "Mail"                    # Room ID 2
    aides: "Aides"                  # Room ID 3
    sysop: "Sysop"                  # Room ID 4
    system: "System"                # Room ID 5
    twit: "Purgatory"               # Room ID 6
  registration:
    terms_required: true
    terms: "To register with this system, you must agree to the following conditions of membership:\n
  1. Bigotry or hatred will not be tolerated.\n
  2. Be kind, and assume best intent.\n
  3. No illegal content.\n
  4. This is a welcoming, friendly community, and we expect everyone to respect all other members.\n
  5. The sysop and aides are in charge, and you agree to abide by their decisions."
  welcome_message: "Welcome to Mesh-Citadel. This is a decentralized bulletin board system. Please log in to continue."


auth:
  session_timeout: 3600             # seconds
  max_password_length: 64
  max_username_length: 32
  password_cache_duration: 14 # days
  recovery_questions:
    - "What is your favorite color?"
    - "What was your first pet's name?"
    - "Who was your favorite teacher?"

transport:
  meshcore:                           # any change to mc requires restart
    <<: *system                       # import the system name
    serial_port: "/dev/ttyACM0"
    #serial_port: "/dev/ttyUSB0"
    baud_rate: 115200
    frequency: 910.525                # MHz
    bandwidth: 62.5                   # kHz
    spreading_factor: 7
    coding_rate: 5
    tx_power: 1                       # dBm
    advert_interval: 6                # hours
    max_retries: 3                    # tune these for your conditions
    max_flood_attempts: 3             # flood mode retries
    flood_after: 2                    # switch to flood after N attempts
    ack_timeout: 8                    # increased from 3 to 8 seconds
    send_timeout: 0                   # 0 = use dynamic timeout from library
    inter_packet_delay: 0.5           # seconds between packets
    max_packet_size: 150              # adjust if you see messages cut off
  cli:
    socket: "/tmp/mesh-citadel-cli.sock"

database:
  db_path: "citadel.db"             # (restart required)

logging:
  log_level: "INFO"
  log_file_path: "citadel.log"
